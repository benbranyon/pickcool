<div class="list">
  <div  class="loading" ng-if="!contests">
    <i class="fa fa-spinner fa-spin"></i>
  </div>
  <div ng-repeat="contest in contests" class="contest" ng-if="contests">

    <span class="votes-total">
      {{contest.vote_count}}
    </span>
    <a class="title" ng-href="{{contest.canonical_url}}">{{contest.title}}</a>
    <button ng-if="contest.is_editable" class="btn btn-xs btn-success" ui-sref="contests-edit({contest_id: contest.id})">Edit</button>
    <div class="clearfix"></div>
    <ul class="list-inline" style="margin-left: 0px; margin-bottom: 15px">
      <li ng-repeat="candidate in contest.candidates | limitTo: 5">
        <a class="candidate-small" ng-href="{{contest.canonical_url}}"  ng-class="{selected: contest.current_user_candidate_id == candidate.id}">
          <img in-view="lazyload($event, $inview, candidate.image('tiny'))" src="/add-user.png"/ alt="{{candidate.name}}" title="Vote for {{candidate.name}}">
          <span class='votes-count'>{{candidate.vote_count}}</span>
        </a>
      </li>
      <li ng-if="contest.candidates.length>5"><a ng-href="{{contest.canonical_url}}">...{{contest.candidates.length-5}} more</a></li>
    </ul>
  </div>
</div>